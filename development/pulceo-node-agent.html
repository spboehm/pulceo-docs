<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>PULCEO Node Agent - PULCEO Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="pulceo-node-agent.html" class="active">PULCEO Node Agent</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PULCEO Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pulceo-node-agent-pna"><a class="header" href="#pulceo-node-agent-pna">PULCEO Node Agent (PNA)</a></h1>
<h2 id="low-level-components"><a class="header" href="#low-level-components">Low-level Components</a></h2>
<h3 id="iperf3"><a class="header" href="#iperf3">iPerf3</a></h3>
<p>PULCEO Node Agent (PNA) uses iPerf3 as low-level component for determining the available bandwidth between particular nodes.
In genernal, iPerf3 requires server and client to measure the currently available bandwidth for both TCP and UDP.</p>
<p>PNA invokes the server as follows: <code>/bin/iperf3 -s -p 5001 -f m</code> (Note: Port my be different) 
Now, the server start listening on port 5001 and waits for incoming requests by the client.</p>
<h4 id="tcp"><a class="header" href="#tcp">TCP</a></h4>
<p>For TCP, PNA invokes the following command to start measuring by the client side: <code>/bin/iperf3 -c localhost -p 5001 -t 10 -f m</code>. After successfull measuring the bandwidth (by default one measurement per second, 10 measurements in total (the default is explicitly defined in the command above by the parameter <code>-t</code>)), iPerf3 shows the following ouput:</p>
<p>On the server side:</p>
<pre><code>-----------------------------------------------------------
Server listening on 5001 (test #1)
-----------------------------------------------------------
Accepted connection from ::1, port 54286
[  5] local ::1 port 5001 connected to ::1 port 54294
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-1.00   sec  10.8 GBytes  92439 Mbits/sec                  
[  5]   1.00-2.00   sec  10.8 GBytes  92586 Mbits/sec                  
[  5]   2.00-3.00   sec  10.8 GBytes  92555 Mbits/sec                  
[  5]   3.00-4.00   sec  10.7 GBytes  92248 Mbits/sec                  
[  5]   4.00-5.00   sec  11.1 GBytes  95747 Mbits/sec                  
[  5]   5.00-6.00   sec  11.4 GBytes  97835 Mbits/sec                  
[  5]   6.00-7.00   sec  11.4 GBytes  97684 Mbits/sec                  
[  5]   7.00-8.00   sec  10.9 GBytes  93543 Mbits/sec                  
[  5]   8.00-9.00   sec  10.6 GBytes  90789 Mbits/sec                  
[  5]   9.00-10.00  sec  10.5 GBytes  90118 Mbits/sec                  
[  5]  10.00-10.00  sec   256 KBytes  38130 Mbits/sec                  
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec   109 GBytes  93554 Mbits/sec                  receiver
</code></pre>
<p>On the client side:</p>
<pre><code>Connecting to host localhost, port 5001
[  5] local ::1 port 54294 connected to ::1 port 5001
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-1.00   sec  10.8 GBytes  92440 Mbits/sec    0   2.00 MBytes       
[  5]   1.00-2.00   sec  10.8 GBytes  92585 Mbits/sec    4   2.37 MBytes       
[  5]   2.00-3.00   sec  10.8 GBytes  92556 Mbits/sec    0   2.37 MBytes       
[  5]   3.00-4.00   sec  10.7 GBytes  92249 Mbits/sec    0   2.37 MBytes       
[  5]   4.00-5.00   sec  11.1 GBytes  95747 Mbits/sec    0   2.37 MBytes       
[  5]   5.00-6.00   sec  11.4 GBytes  97833 Mbits/sec    0   2.37 MBytes       
[  5]   6.00-7.00   sec  11.4 GBytes  97686 Mbits/sec    0   2.37 MBytes       
[  5]   7.00-8.00   sec  10.9 GBytes  93543 Mbits/sec    1   2.37 MBytes       
[  5]   8.00-9.00   sec  10.6 GBytes  90789 Mbits/sec    0   2.37 MBytes       
[  5]   9.00-10.00  sec  10.5 GBytes  90118 Mbits/sec    0   2.37 MBytes       
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec   109 GBytes  93555 Mbits/sec    5             sender
[  5]   0.00-10.00  sec   109 GBytes  93554 Mbits/sec                  receiver

iperf Done.
</code></pre>
<p>The iPerf3 client side shows two rows as result, once tagged with sender and once tagged with receiver.
The row tagged with sender is the client-perceived throughput whereas the row tagged with receiver is the throughput perceived by the server.
In good network conditions, both rows are identical. However, they may differ if packet retransmission is required, as shown in the row of the sender 
In total, 5 packets were required to retransmit. This mitigates the perceived troughput on the receiver's side, because the receiver had to wait for packet retransmission by the client.
PNA includes both results in a scheduled measurement for transparency and fine-tuning purposes.</p>
<h4 id="udp"><a class="header" href="#udp">UDP</a></h4>
<p>For UDP, PNA invokes the following command to start measuring by the client side: <code>iperf3 -c localhost -u -p 5001 -t 10 -f m</code>. In UDP mode, iPerf3 targets a bitrate of 1 Mbit/sec, which is implicitly assumed in the already mentioned command. Alternating bitrates can be defined with the option <code>-b</code>, for example, resulting in <code>iperf3 -c localhost -u -p 5001 -b 1M -f m</code>. After successfull measuring the bandwidth (by default one measurement per second, 10 seconds in total), iPerf3 shows the following ouput:</p>
<p>On the server side:</p>
<pre><code>-----------------------------------------------------------
Server listening on 5001 (test #1)
-----------------------------------------------------------
Accepted connection from ::1, port 60254
[  5] local ::1 port 5001 connected to ::1 port 57466
[ ID] Interval           Transfer     Bitrate         Jitter    Lost/Total Datagrams
[  5]   0.00-1.00   sec   128 KBytes  1.05 Mbits/sec  0.017 ms  0/4 (0%)  
[  5]   1.00-2.00   sec   128 KBytes  1.05 Mbits/sec  0.029 ms  0/4 (0%)  
[  5]   2.00-3.00   sec   128 KBytes  1.05 Mbits/sec  0.024 ms  0/4 (0%)  
[  5]   3.00-4.00   sec   128 KBytes  1.05 Mbits/sec  0.024 ms  0/4 (0%)  
[  5]   4.00-5.00   sec   128 KBytes  1.05 Mbits/sec  0.023 ms  0/4 (0%)  
[  5]   5.00-6.00   sec  96.0 KBytes  0.79 Mbits/sec  0.028 ms  0/3 (0%)  
[  5]   6.00-7.00   sec   128 KBytes  1.05 Mbits/sec  0.029 ms  0/4 (0%)  
[  5]   7.00-8.00   sec   128 KBytes  1.05 Mbits/sec  0.025 ms  0/4 (0%)  
[  5]   8.00-9.00   sec   128 KBytes  1.05 Mbits/sec  0.028 ms  0/4 (0%)  
[  5]   9.00-10.00  sec   128 KBytes  1.05 Mbits/sec  0.025 ms  0/4 (0%)  
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Jitter    Lost/Total Datagrams
[  5]   0.00-10.00  sec  1.22 MBytes  1.02 Mbits/sec  0.025 ms  0/39 (0%)  receiver
</code></pre>
<p>On the client side:</p>
<pre><code>[  5] local ::1 port 57466 connected to ::1 port 5001
[ ID] Interval           Transfer     Bitrate         Total Datagrams
[  5]   0.00-1.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   1.00-2.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   2.00-3.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   3.00-4.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   4.00-5.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   5.00-6.00   sec  96.0 KBytes  0.79 Mbits/sec  3  
[  5]   6.00-7.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   7.00-8.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   8.00-9.00   sec   128 KBytes  1.05 Mbits/sec  4  
[  5]   9.00-10.00  sec   128 KBytes  1.05 Mbits/sec  4  
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Jitter    Lost/Total Datagrams
[  5]   0.00-10.00  sec  1.22 MBytes  1.02 Mbits/sec  0.000 ms  0/39 (0%)  sender
[  5]   0.00-10.00  sec  1.22 MBytes  1.02 Mbits/sec  0.025 ms  0/39 (0%)  receiver
</code></pre>
<p>The iPerf3 client side shows two rows as result, once tagged with sender and once tagged with receiver.
The row tagged with sender is the client-perceived throughput whereas the row tagged with receiver is the throughput perceived by the server.
In good network conditions, both rows are identical. However, they may differ packets get lost or arrive out-of-order.
In total 1.22 MBytes are transmitted from client to server with a bitrate of 1.02 Mbits/s.
Besides these measurements, iPerf3 also measures the Jitter, in this case 0.025 ms.
High Jitter values imply a temporal fluctuation in receiving packages.
Especially real-time applications can suffer from high Jitter values.
Similar to the TCP mode of iPerf3, PNA includes both result lines in a scheduled measurement for transparency and fine-tuning purposes.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
